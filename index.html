<!DOCTYPE html>
<html lang="kr">
  <head>
    <meta charset="UTF-8" />
    <title>ìˆ«ì ì•¼êµ¬ ê²Œì„</title>
  </head>
  <body>
    <div id="app">
      <h1>âš¾ ìˆ«ì ì•¼êµ¬ ê²Œì„</h1>
      <p>
        <strong>1~9ê¹Œì§€ì˜ ìˆ˜</strong>ë¥¼ ì¤‘ë³µì—†ì´ <strong>3ê°œ</strong>ë¥¼
        ì‘ì„±í•´ì£¼ì„¸ìš”. <br />
        ì˜¬ë°”ë¥¸ ì˜ˆ) 139 <br />
        í‹€ë¦° ì˜ˆ) 122
      </p>
      <input type="text" id="user-input" />
      <button id="submit">í™•ì¸</button>
      <h3>ğŸ“„ ê²°ê³¼</h3>
      <div id="result"></div>
      <div id="restart"></div>
    </div>
    <template id="restartTemplate">
      ê²Œì„ì„ ìƒˆë¡œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ? <button id="restartbtn">ê²Œì„ ì¬ì‹œì‘</button>
    </template>
    <script type="module" src="src/index.js"></script>
    <script type="module" src="src/handlers.js"></script>
    <script type="module">
      import {BaseballGame, Validation} from './src/index.js';
      import {wrongResultHandler, winHandler} from './src/handlers.js';
      let game = new BaseballGame();
      let validation = new Validation();
      
      document.getElementById('submit').addEventListener("click", function(){
        const userInput = document.getElementById('user-input').value;

        let inputArray = [];
        inputArray = userInput.split('');
        if (validation.isNumber(inputArray) === false) {
          return alert('1ì—ì„œ 9 ì‚¬ì´ì˜ ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”');
        }

        if (validation.isThreeDigit(inputArray) === false) {
          return alert('ì„¸ìë¦¬ì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
        }

        if (validation.hasDuplicatedNumber(inputArray) === true) {
          return alert('ì¤‘ë³µëœ ê°’ì„ ì…ë ¥í•˜ì˜€ìŠµë‹ˆë‹¤');
        }
        
        
        let {ball, strike} = game.play(userInput);
        if(strike === 3) {
          winHandler(function(){
            game = new BaseballGame();
          });
        } else {
          wrongResultHandler(ball, strike);
        }      
      });

      
      
    </script>
  </body>
</html>
